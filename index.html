<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Memoirs</title>
    <meta name="description" content="我们的生活">
    <!-- favicon 设置 -->
    <link rel="icon" href="assets/picture/logo.png" type="image/png" sizes="32x32">
    <link rel="apple-touch-icon" href="assets/picture/logo.png" sizes="180x180">
    <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
    <!-- 退出登录按钮 - 移到页面右上角 -->
    <button class="logout-btn-fixed" onclick="logout()" title="退出登录">退出</button>

    <!-- 登录模态框 -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <h2>📆 请输入访问密码</h2>
            <input type="password" id="passwordInput" placeholder="请输入密码" onkeypress="handlePasswordKeyPress(event)">
            <button onclick="login()" class="login-btn">登录</button>
            <div id="loginError" class="error-message"></div>
        </div>
    </div>

    <div class="container" id="mainContent" style="display: none;">
        <header class="header">
            <h1>
                <span class="title-prefix">All about</span>
                <img src="assets/picture/flora.png" alt="花" class="emoji" width="80" height="80">
                <img src="assets/picture/leaf.png" alt="叶" class="emoji" width="80" height="80">
            </h1>
            <p class="subtitle">Vivre sans aimer n'est pas proprement vivre.</p>
        </header>
        
        <nav class="nav">
            <button class="nav-btn active" onclick="showSection('recording')">📸 Recording...</button>
            <button class="nav-btn" onclick="showSection('upload')">➕ Upload</button>
        </nav>
        
        <!-- 时间轴记录部分 -->
        <section class="section active" id="recording">
            <div class="timeline-controls">
                <button class="sort-btn" onclick="toggleTimelineSort()">
                    <span class="sort-icon">⏱</span>
                    <span class="sort-text">最新优先</span>
                </button>
                <button class="refresh-btn" onclick="loadMemories()">
                    <!-- <span class="refresh-icon">🔄</span> -->
                    <span class="refresh-text">刷新</span>
                </button>
            </div>
            
            <div class="loading" id="timelineLoading" style="display: none;">加载中...</div>
            <div class="timeline" id="timeline">
                <!-- 内容将通过 JavaScript 动态添加 -->
            </div>
        </section>
        
        <!-- 上传部分 -->
        <section class="section" id="upload">
            <h2>树洞投稿处</h2>
            
            <div class="upload-options">
                <button class="upload-type-btn active" onclick="switchUploadType('photo')">📸 Photo</button>
                <button class="upload-type-btn" onclick="switchUploadType('video')">🎬 Video</button>
                <button class="upload-type-btn" onclick="switchUploadType('text')">📝 Text</button>
            </div>
            
            <div class="upload-area" id="photoUpload">
                <h3>上传照片</h3>
                <p>拖拽照片到这里或点击按钮选择</p>
                <input type="file" id="photoInput" accept="image/*" multiple style="display: none;">
                <button class="upload-btn" onclick="document.getElementById('photoInput').click()">选择照片</button>
                <div class="upload-preview" id="photoPreview"></div>
            </div>
            
            <div class="upload-area hidden" id="videoUpload">
                <h3>上传视频</h3>
                <p>拖拽视频到这里或点击按钮选择</p>
                <input type="file" id="videoInput" accept="video/*" style="display: none;">
                <button class="upload-btn" onclick="document.getElementById('videoInput').click()">选择视频</button>
                <div class="upload-preview" id="videoPreview"></div>
            </div>
            
            <div class="form-group">
                <label for="memoryTitle">标题 </label>
                <input type="text" id="memoryTitle" placeholder="（选填）">
            </div>
            
            <div class="form-group">
                <label for="memoryDate">日期</label>
                <input type="datetime-local" id="memoryDate" required>
            </div>
            
            <div class="form-group">
                <label for="memoryContent">描述</label>
                <!-- <textarea id="memoryContent" rows="5" placeholder="写下当下的感受吧！" required></textarea> -->
            </div>
            
            <button class="upload-btn submit-btn" onclick="saveMemory()" id="saveBtn">保存并发布</button>
        </section>
    </div>
    
    <footer class="footer">
        <p>FlorandLeaf © 2025 | 我们的年年岁岁</p>
    </footer>

    <script src="assets/js/script.js"></script>
</body>
</html>